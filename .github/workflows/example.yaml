name: learn-github-he file starts with six keyactions

on: push

jobs:
  clone-test-repo:
    runs-on: macos-latest
    steps:
    - name: checkout
      uses: actions/checkout@v3 #checkout the code

    - name: command run
      run: |
        ls
        pwd
        ls -l
    - name: Set up JDK 1.8
      uses: actions/setup-java@v3
      with:
        distribution: 'temurin'
        java-version: '17'
#
#
#    - name: Setup Gradle
#      uses: gradle/gradle-build-action@v2
#
#    - name: get pwd
#      run: pwd
#
#    - name: build with gradle
#      run: gradle build
# #
#     - name: Install and Run Appium Server
#       run: |
#         chmod +x scripts/RunAppiumServer.sh
#         scripts/RunAppiumServer.sh

#     - name: run Emulator
#       uses: ReactiveCircus/android-emulator-runner@v2.27.0
#       with:
#         api-level: 29
#         script: pwd

#       script: ./gradlew connectedCheck

#     - name: printing apk
#       run: ls app/build/outputs/apk/debug/app-debug.apk


    - name: Cloning repo
      uses: actions/checkout@v2
      with:
        repository: saumilrewari/test
#        token: ${{  secrets.PAT_TOKEN  }}
        path: /Users/runner/work/cicd/cicd/test
        submodules: recursive

    - name: checking cloned repo
      uses: andstor/file-existence-action@v2
      with:
        files: "test/opsis_project, test/opsis_project/requirements.txt"

    - name: File exists
      if: steps.check_files.outputs.files_exists == 'true'
      run: echo All files exists!

    - name: Install and Run Appium Server
      run: |
        chmod +x test/RunAppiumServer.sh
        sh test/RunAppiumServer.sh

    - name: Install Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'
    - run: python3 --version


    - name: installing dependency
      run: pip3 install -r test/opsis_project/requirements.txt


    - name: running the required file
      run: |
        pwd
        ls
        pytest -k="test_pass" -vv 
        python3 test/opsis_project/test/test_build.py
        




